<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visitor Location Globe</title>
  <style>
    html, body {
      margin: 0;
      background: transparent;
      overflow: hidden;
    }
    #globeViz {
      position: absolute;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: transparent;
    }
  </style>
</head>
<body>
  <div id="globeViz"></div>

  <!-- Globe.gl and dependencies -->
  <script src="https://unpkg.com/three"></script>
  <script src="https://unpkg.com/globe.gl"></script>
  <script>
    // Create globe
    const world = Globe()
      (document.getElementById('globeViz'))
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-dark.jpg') // Looks nice over dark bg
      .backgroundColor('rgba(0,0,0,0)') // Transparent background
      .pointOfView({ lat: 0, lng: 0, altitude: 2 }, 4000)
      .showAtmosphere(true)
      .atmosphereColor('#ffffff')
      .atmosphereAltitude(0.25);

    // Get user location
    navigator.geolocation.getCurrentPosition(position => {
      const { latitude, longitude } = position.coords;
      // Add marker to globe
      world
        .pointsData([{ lat: latitude, lng: longitude, size: 1, color: 'red' }])
        .pointAltitude('size')
        .pointColor('color');
    }, () => {
      alert('Unable to get location.');
    });
  </script>
</body>
</html>
